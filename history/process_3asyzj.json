[{
  "history_id" : "q8Cck7m2iR7b",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\ncsvs_path = '/groups/ESS/aalnaim/cmaq/output_hourly'\n\nfor day in days:\n\tprint(\"Opening: \"+\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n      \n\tdf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n\n\t\n\tall_hourly_files = sorted(glob.glob(os.path.join(csvs_path, \"prediction_rf_\"+day+\"*.csv\")), key=lambda name: int(name[-6:-4]))\n\tdf_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\n\tprint(\"read all hourly csv's\")\n    \n\tfor df in df_from_each_hourly_file:\n\t\tprint(\"reading df for day: \"+day)\n\n\t\t# Getting hour value in df to match hour in cdf file for replacement of O3 value\n\t\tdf['YYYYMMDDHH'] = df['YYYYMMDDHH'].astype(str)\n\t\thour = df['YYYYMMDDHH'].str[8:10]\n\t\tprint(hour.values[0])\n        \n\t\t# Matching hours between df and cdf file for proper replacement of values.\n\t\tcdf_filt = df_cdf.sel(TSTEP=df_cdf.TSTEP == int(hour.values[0]))\n\n\t\t# Changing the shape of \"prediction\" column to match expected dim shape found in cdf file\n\t\treshaped_prediction = np.atleast_3d(df['prediction']).reshape(-1, 265, 442)\n\n\t\t# Remove \"LAY\" Dimension in O3 variable already in nc file.\n\t\treduced_dim = cdf_filt['O3'].sel(LAY=1, drop=True)\n\t\t# Swap values from original nc file with new prediction data\n\t\treduced_dim.values = reshaped_prediction\n\n\t\t# Apply changes to data variable in nc file\n\t\tcdf_filt['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n\t\tcdf_filt.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')\n\n\t\tprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')",
  "history_output" : "Opening: /groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220705_extracted.nc\nread all hourly csv's\nreading df for day: 20220705\n10\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070510_Hourly_ML_extracted.nc\nreading df for day: 20220705\n11\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070511_Hourly_ML_extracted.nc\nreading df for day: 20220705\n12\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070512_Hourly_ML_extracted.nc\nreading df for day: 20220705\n13\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070513_Hourly_ML_extracted.nc\nreading df for day: 20220705\n14\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070514_Hourly_ML_extracted.nc\nreading df for day: 20220705\n15\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070515_Hourly_ML_extracted.nc\nreading df for day: 20220705\n16\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070516_Hourly_ML_extracted.nc\nreading df for day: 20220705\n17\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070517_Hourly_ML_extracted.nc\nreading df for day: 20220705\n18\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070518_Hourly_ML_extracted.nc\nreading df for day: 20220705\n19\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070519_Hourly_ML_extracted.nc\nreading df for day: 20220705\n20\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070520_Hourly_ML_extracted.nc\nreading df for day: 20220705\n21\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070521_Hourly_ML_extracted.nc\nreading df for day: 20220705\n22\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070522_Hourly_ML_extracted.nc\nreading df for day: 20220705\n23\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070523_Hourly_ML_extracted.nc\nreading df for day: 20220705\n0\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207050_Hourly_ML_extracted.nc\nreading df for day: 20220705\n1\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207051_Hourly_ML_extracted.nc\nreading df for day: 20220705\n2\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207052_Hourly_ML_extracted.nc\nreading df for day: 20220705\n3\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207053_Hourly_ML_extracted.nc\nreading df for day: 20220705\n4\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207054_Hourly_ML_extracted.nc\nreading df for day: 20220705\n5\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207055_Hourly_ML_extracted.nc\nreading df for day: 20220705\n6\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207056_Hourly_ML_extracted.nc\nreading df for day: 20220705\n7\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207057_Hourly_ML_extracted.nc\nreading df for day: 20220705\n8\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207058_Hourly_ML_extracted.nc\nreading df for day: 20220705\n9\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207059_Hourly_ML_extracted.nc\nOpening: /groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220706_extracted.nc\nread all hourly csv's\nreading df for day: 20220706\n10\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070610_Hourly_ML_extracted.nc\nreading df for day: 20220706\n11\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070611_Hourly_ML_extracted.nc\nreading df for day: 20220706\n12\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070612_Hourly_ML_extracted.nc\nreading df for day: 20220706\n13\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070613_Hourly_ML_extracted.nc\nreading df for day: 20220706\n14\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070614_Hourly_ML_extracted.nc\nreading df for day: 20220706\n15\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070615_Hourly_ML_extracted.nc\nreading df for day: 20220706\n16\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070616_Hourly_ML_extracted.nc\nreading df for day: 20220706\n17\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070617_Hourly_ML_extracted.nc\nreading df for day: 20220706\n18\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070618_Hourly_ML_extracted.nc\nreading df for day: 20220706\n19\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070619_Hourly_ML_extracted.nc\nreading df for day: 20220706\n20\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070620_Hourly_ML_extracted.nc\nreading df for day: 20220706\n21\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070621_Hourly_ML_extracted.nc\nreading df for day: 20220706\n22\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070622_Hourly_ML_extracted.nc\nreading df for day: 20220706\n23\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070623_Hourly_ML_extracted.nc\nreading df for day: 20220706\n0\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207060_Hourly_ML_extracted.nc\nreading df for day: 20220706\n1\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207061_Hourly_ML_extracted.nc\nreading df for day: 20220706\n2\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207062_Hourly_ML_extracted.nc\nreading df for day: 20220706\n3\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207063_Hourly_ML_extracted.nc\nreading df for day: 20220706\n4\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207064_Hourly_ML_extracted.nc\nreading df for day: 20220706\n5\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207065_Hourly_ML_extracted.nc\nreading df for day: 20220706\n6\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207066_Hourly_ML_extracted.nc\nreading df for day: 20220706\n7\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207067_Hourly_ML_extracted.nc\nreading df for day: 20220706\n8\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207068_Hourly_ML_extracted.nc\nreading df for day: 20220706\n9\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207069_Hourly_ML_extracted.nc\n",
  "history_begin_time" : 1657246536936,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "wPieEkNkWACl",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\ncsvs_path = '/groups/ESS/aalnaim/cmaq/output_hourly'\n\nfor day in days:\n\tprint(\"Opening: \"+\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n      \n\tdf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n\n\t\n\tall_hourly_files = sorted(glob.glob(os.path.join(csvs_path, \"prediction_rf_\"+day+\"*.csv\")), key=lambda name: int(name[-6:-4]))\n\tdf_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\n\tprint(\"read all hourly csv's\")\n    \n\tfor df in df_from_each_hourly_file:\n\t\tprint(\"reading df for day: \"+day)\n\n\t\t# Getting hour value in df to match hour in cdf file for replacement of O3 value\n\t\thour = df['YYYYMMDDHH'].str[8:10]\n\t\tprint(hour.values[0])\n        \n\t\t# Matching hours between df and cdf file for proper replacement of values.\n\t\tcdf_filt = df_cdf.sel(TSTEP=df_cdf.TSTEP == int(hour.values[0]))\n\n\t\t# Changing the shape of \"prediction\" column to match expected dim shape found in cdf file\n\t\treshaped_prediction = np.atleast_3d(df['prediction']).reshape(-1, 265, 442)\n\n\t\t# Remove \"LAY\" Dimension in O3 variable already in nc file.\n\t\treduced_dim = cdf_filt['O3'].sel(LAY=1, drop=True)\n\t\t# Swap values from original nc file with new prediction data\n\t\treduced_dim.values = reshaped_prediction\n\n\t\t# Apply changes to data variable in nc file\n\t\tcdf_filt['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n\t\tcdf_filt.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')\n\n\t\tprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')",
  "history_output" : "Opening: /groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220705_extracted.nc\nread all hourly csv's\nreading df for day: 20220705\nTraceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 29, in <module>\n    hour = df['YYYYMMDDHH'].str[8:10]\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/pandas/core/generic.py\", line 5583, in __getattr__\n    return object.__getattribute__(self, name)\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/pandas/core/accessor.py\", line 182, in __get__\n    accessor_obj = self._accessor(obj)\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/pandas/core/strings/accessor.py\", line 177, in __init__\n    self._inferred_dtype = self._validate(data)\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/pandas/core/strings/accessor.py\", line 231, in _validate\n    raise AttributeError(\"Can only use .str accessor with string values!\")\nAttributeError: Can only use .str accessor with string values!\n",
  "history_begin_time" : 1657246426998,
  "history_end_time" : 1657246542578,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "n39tvS09NCPH",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\ncsvs_path = '/groups/ESS/aalnaim/cmaq/output_hourly'\n\nfor day in days:\n\tprint(\"Opening: \"+\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n      \n\tdf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n\n\t\n\tall_hourly_files = sorted(glob.glob(os.path.join(csvs_path, \"prediction_rf_\"+day+\"*.csv\")), key=lambda name: int(name[-6:-4]))\n\tdf_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\n\tprint(\"read all hourly csv's\")\n    \n\tfor df in df_from_each_hourly_file:\n\t\tprint(\"reading df for day:\"+day+\"\\n\")\n\n\t\t# Getting hour value in df to match hour in cdf file for replacement of O3 value\n\t\thour = df['YYYYMMDDHH'].str[8:10]\n\t\tprint(hour.values[0])\n        \n\t\t# Matching hours between df and cdf file for proper replacement of values.\n\t\tcdf_filt = df_cdf.sel(TSTEP=df_cdf.TSTEP == int(hour.values[0]))\n\n\t\t# Changing the shape of \"prediction\" column to match expected dim shape found in cdf file\n\t\treshaped_prediction = np.atleast_3d(df['prediction']).reshape(-1, 265, 442)\n\n\t\t# Remove \"LAY\" Dimension in O3 variable already in nc file.\n\t\treduced_dim = cdf_filt['O3'].sel(LAY=1, drop=True)\n\t\t# Swap values from original nc file with new prediction data\n\t\treduced_dim.values = reshaped_prediction\n\n\t\t# Apply changes to data variable in nc file\n\t\tcdf_filt['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n\t\tcdf_filt.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')\n\n\t\tprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')",
  "history_output" : "  File \"processing_test_netcdf.py\", line 26\n    print(\"reading df for day:\"+day+\"\n                                    ^\nSyntaxError: EOL while scanning string literal\n",
  "history_begin_time" : 1657246382797,
  "history_end_time" : 1657246542059,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "meUDev6DV7Iq",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\n\nfor day in days:\n    print(\"Opening: \"+\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n      \n    df_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n\n    path = '/groups/ESS/aalnaim/cmaq/output_hourly'\n    all_hourly_files = sorted(glob.glob(os.path.join(path, \"prediction_rf_\"+day+\"*.csv\")), key=lambda name: int(name[-6:-4]))\n    df_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\n    print(\"read all hourly csv's\")\n    \n\tfor df in df_from_each_hourly_file:\n\t\tprint(\"reading df for day:\"+day+\"\\n\")\n\n\t\t# Getting hour value in df to match hour in cdf file for replacement of O3 value\n\t\thour = df['YYYYMMDDHH'].str[8:10]\n\t\tprint(hour.values[0])\n        \n\t\t# Matching hours between df and cdf file for proper replacement of values.\n\t\tcdf_filt = df_cdf.sel(TSTEP=df_cdf.TSTEP == int(hour.values[0]))\n\n\t\t# Changing the shape of \"prediction\" column to match expected dim shape found in cdf file\n\t\treshaped_prediction = np.atleast_3d(df['prediction']).reshape(-1, 265, 442)\n\n\t\t# Remove \"LAY\" Dimension in O3 variable already in nc file.\n\t\treduced_dim = cdf_filt['O3'].sel(LAY=1, drop=True)\n\t\t# Swap values from original nc file with new prediction data\n\t\treduced_dim.values = reshaped_prediction\n\n\t\t# Apply changes to data variable in nc file\n\t\tcdf_filt['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n\t\tcdf_filt.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')\n\n\t\tprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')",
  "history_output" : "  File \"processing_test_netcdf.py\", line 24\n    for df in df_from_each_hourly_file:\n                                      ^\nTabError: inconsistent use of tabs and spaces in indentation\n",
  "history_begin_time" : 1657246334695,
  "history_end_time" : 1657246541461,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "YLlq2Glby0Wd",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\n\nfor day in days:\n    print(\"Opening: \"+\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n      \n    df_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n\n    path = '/groups/ESS/aalnaim/cmaq/output_hourly'\n    all_hourly_files = sorted(glob.glob(os.path.join(path, \"prediction_rf_\"+day+\"*.csv\")), key=lambda name: int(name[-6:-4]))\n    df_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\n    print(\"read all hourly csv's\")\n    \n    for df in df_from_each_hourly_file:\n        print(\"reading df for day:\"+day+\"\\n\")\n\n        # Getting hour value in df to match hour in cdf file for replacement of O3 value\n        hour = df['YYYYMMDDHH'].str[8:10]\n        print(hour.values[0])\n        \n        # Matching hours between df and cdf file for proper replacement of values.\n        cdf_filt = df_cdf.sel(TSTEP=df_cdf.TSTEP == int(hour.values[0]))\n\n        # Changing the shape of \"prediction\" column to match expected dim shape found in cdf file\n        reshaped_prediction = np.atleast_3d(df['prediction']).reshape(-1, 265, 442)\n\n        # Remove \"LAY\" Dimension in O3 variable already in nc file.\n        reduced_dim = cdf_filt['O3'].sel(LAY=1, drop=True)\n        # Swap values from original nc file with new prediction data\n        reduced_dim.values = reshaped_prediction\n\n        # Apply changes to data variable in nc file\n        cdf_filt['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n        cdf_filt.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')\n\n        print('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')",
  "history_output" : "  File \"processing_test_netcdf.py\", line 25\n    print(\"reading df for day:\"+day+\"\n                                    ^\nSyntaxError: EOL while scanning string literal\n",
  "history_begin_time" : 1657246244969,
  "history_end_time" : 1657246540595,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "zl22tXflXGc0",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base - timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\n\nprint(\"Opening: \"+\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\")\n      \ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[1]+'11') & (df_filt['YYYYMMDDHH'] < days[0]+'12')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "Opening: /groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220625_extracted.nc\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220625_ML_extracted.nc\n",
  "history_begin_time" : 1656459498325,
  "history_end_time" : 1657246540064,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "kdBDR4zuGRKz",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base - timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\n\nprint(\"Opening: \"+\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\"_\n      \ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[1]+'11') & (df_filt['YYYYMMDDHH'] < days[0]+'12')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "  File \"processing_test_netcdf.py\", line 17\n    print(\"Opening: \"+\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\"_\n                                                                                                                                                  ^\nSyntaxError: invalid syntax\n",
  "history_begin_time" : 1656459474602,
  "history_end_time" : 1657246539364,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "p72xum4kath",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base - timedelta(days=x) for x in range(3)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[2]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[1]+'11') & (df_filt['YYYYMMDDHH'] < days[0]+'12')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220625_ML_extracted.nc\n",
  "history_begin_time" : 1656453929138,
  "history_end_time" : 1656454194243,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : "p6wvf2",
  "indicator" : "Done"
},{
  "history_id" : "tlpe3au2vjr",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base - timedelta(days=x) for x in range(3)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[2]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[1]+'11') & (df_filt['YYYYMMDDHH'] < days[0]+'12')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "bash: python: command not found\n",
  "history_begin_time" : 1656428425283,
  "history_end_time" : 1656428429355,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : "p6wvf2",
  "indicator" : "Stopped"
},{
  "history_id" : "60hZgMCFuH2u",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(\"20220613|20220614\", case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > '2022061311') & (df_filt['YYYYMMDDHH'] < '2022061412')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_ML_extracted.nc')",
  "history_output" : "Running",
  "history_begin_time" : 1655501956099,
  "history_end_time" : 1655503046217,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "PoORHAfZg0Ux",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(\"20220613|20220614\", case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > '2022061311') & (df_filt['YYYYMMDDHH'] < '2022061412')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_ML_extracted.nc')",
  "history_output" : null,
  "history_begin_time" : 1655501841903,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : null
},{
  "history_id" : "WICvybCO3non",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(\"20220613|20220614\", case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > '2022061312') & (df_filt['YYYYMMDDHH'] < '2022061412')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_ML_extracted.nc')",
  "history_output" : "",
  "history_begin_time" : 1655496063976,
  "history_end_time" : 1655501871999,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Failed"
},{
  "history_id" : "9wdqy7efw4qC",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(\"20220613|20220614\", case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > '2022061312') & (df_filt['YYYYMMDDHH'] < '2022061412')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_ML_extracted.nc')",
  "history_output" : null,
  "history_begin_time" : 1655495993831,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : null
},{
  "history_id" : "beeVZaInXI6r",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(\"20220613|20220614\", case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > '2022061312') & (df_filt['YYYYMMDDHH'] < '2022061412')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_ML_extracted.nc')",
  "history_output" : "",
  "history_begin_time" : 1655494545852,
  "history_end_time" : 1655496023888,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Failed"
},{
  "history_id" : "INqHz0JSeptf",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(\"20220613|20220614\", case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > '2022061312') & (df_filt['YYYYMMDDHH'] < '2022061412')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_ML_extracted.nc')",
  "history_output" : "Running",
  "history_begin_time" : 1655493655846,
  "history_end_time" : 1655494421371,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "3nKofAxIaXVd",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(\"20220613\")]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\nreshaped_lat = np.atleast_3d(df_filt['Latitude']).reshape(-1, 265, 442)\nreshaped_lon = np.atleast_3d(df_filt['Longitude']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\ndf_cdf['LAT'] = (['TSTEP', 'ROW', 'COL'], reshaped_lat)\ndf_cdf['LON'] = (['TSTEP', 'ROW', 'COL'], reshaped_lon)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc')",
  "history_output" : "Running",
  "history_begin_time" : 1655406353871,
  "history_end_time" : 1655493635343,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "f2HBptDwAyBk",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\n# nc file need to corespond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(\"20220613\")]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\nreshaped_lat = np.atleast_3d(df_filt['Latitude']).reshape(-1, 265, 442)\nreshaped_lon = np.atleast_3d(df_filt['Longitude']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\ndf_cdf['LAT'] = (['TSTEP', 'ROW', 'COL'], reshaped_lat)\ndf_cdf['LON'] = (['TSTEP', 'ROW', 'COL'], reshaped_lon)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc')",
  "history_output" : null,
  "history_begin_time" : 1655406212085,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : null
},{
  "history_id" : "d4w6nlhuaxi",
  "history_input" : null,
  "history_output" : null,
  "history_begin_time" : null,
  "history_end_time" : 1656450968039,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : "p6wvf2",
  "indicator" : "Stopped"
},{
  "history_id" : "tyaio8q7nov",
  "history_input" : null,
  "history_output" : null,
  "history_begin_time" : null,
  "history_end_time" : 1656452485883,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : "p6wvf2",
  "indicator" : "Stopped"
},]
